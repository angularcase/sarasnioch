<app-page-content [title]="article()?.title ?? 'Artykuł'" [breadcrumbs]="breadcrumbs()">
    @if (loading()) {
        <p class="text-surface-600 dark:text-surface-300">Pobieranie artykułu...</p>
    } @else if (article(); as art) {
        <div class="grid grid-cols-1 md:grid-cols-[40fr_60fr] gap-6 md:gap-8">
            <div class="flex flex-col gap-6 order-1 md:order-1">
                <app-atom-grey-box [title]="'Autor'">
                    <p slot="body" class="text-surface-600 dark:text-surface-400 text-base leading-normal">{{ getAuthorDisplay(art) }}</p>
                </app-atom-grey-box>
            </div>
            <div class="flex flex-col gap-6 min-w-0 order-2 md:order-2">
                <div class="text-sm text-surface-600 dark:text-surface-200">
                    <span>Opublikowano </span>
                    <span class="font-bold">{{ art.publishedAt | date:'d MMMM yyyy' }}</span>
                </div>
                <div class="flex flex-wrap gap-2">
                    @for (cat of art.animalCategories ?? []; track cat.slug) {
                        <app-atom-badge variant="category" [label]="cat.name" [routerLink]="'/artykuly/' + cat.slug" />
                    }
                    @for (prod of art.products ?? []; track prod.slug) {
                        <app-atom-badge variant="product" [label]="prod.name" [routerLink]="'/produkt/' + prod.slug" />
                    }
                </div>
                <div class="text-base text-surface-700 dark:text-surface-300 prose dark:prose-invert max-w-none" [innerHTML]="art.content"></div>
                @if (art.gallery && art.gallery.length > 0) {
                    <div class="mt-6">
                        <app-gallery [images]="getGalleryUrls(art)" />
                    </div>
                }
            </div>
        </div>
    }
</app-page-content>
